# 差分隐私基本知识

## 差分隐私定义：
若机制 M 对于任一输出集合 S 和任意邻近集 D, D′ 总有：
> Pr[ M(D) ∈ S ] ⩽ exp(ε) ⋅ Pr[ M(D′) ∈ S ] + δ

则称 M 满足 (ε,δ)-(近似)差分隐私. 当 δ=0 时，称为 ε-差分隐私. 其中 ε 称为隐私预算.

记号说明：

- 数据集：数据全体记作 X，其子集 D⊂X 称为数据集.
- 邻近集：只相差一条记录的一对数据集. 即 |D△D′|=1.
- 查询：映射 f:D→R. 全体查询记作 F.
- 查询的敏感度：

1. 局部敏感度：ΔfLS=maxD′∥f(D)−f(D′)∥1.
2. 全局敏感度：ΔfLS=maxD,D′∥f(D)−f(D′)∥1.

容易看出，局部敏感度会与数据分布有很强的关联，但全局敏感度一般较大. 故在需要使用局部敏感度时，常采用局部敏感度的平滑上界.


## Laplace 机制
Laplace分布：这里只考虑均值为 0 的Laplace分布. 尺度参数为 b 的Laplace分布记为 Lap(b)，其密度函数为：
> p(x) = 1/2b * exp(−|x| / b)

Laplace机制就是给查询结果添加服从Laplace分布的噪声，即：
> M(D) = f(D) + ξ

若 ξ∼Lap( Δf / ε)，则该算法可提供 ε-差分隐私保护.

从过程即可知道，Laplace机制只适合数值查询.


## 指数机制
对于非数值查询，需要用指数机制来干扰. 具体的办法是（以查询 A 得分最高的课程为例）：
1. 先给所有可能的答案一个打分，称为效用函数 q，q 越大表示这个答案越接近真实答案.
- 此处可能的答案为：机器学习、高等代数、数据挖掘、算法分析.
- 此处的效用可以用成绩表示：90，90，0，90.
2. 给所有可能答案分别分配一个概率，规则为：
> Pr[return ϕ] ∝ exp(εq(D,φ) / 2Δq)

此时算法提供 ε-差分隐私保护.

## 高斯机制
Laplace机制提供的是严格的 `(ε,0)-DP` ，而高斯机制则提供的是松弛的 `(ε,δ)-DP` 机制。


## 可用性评估
给数据加噪声必定会降低数据的可用性，对可用性的评估一般有以下几种：

1. 直接看噪声大小：噪声 ↓，可用性 ↑.
2. 对误差进行度量：单次查询误差为 ∥f(D)−fn(D)∥ （fn 表示加了噪音的 f）
3. (α,β)-可用性：当 F 满足
> Pr[maxf ∈ F| f(D) − fn(D)|⩽α]>1−β  
> 称 D 是 (α,β)-可用的.




